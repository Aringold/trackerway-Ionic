(function () {
  angular.module("rewire.objects").controller("addObjectController", addObjectController);

  addObjectController.$inject = ["homeService", "toastr", "$http", "global", "utilService", "$ionicHistory"];

  function addObjectController(homeService, toastr, $http, global, utilService, $ionicHistory) {
    var vm = this;

    vm.working = false;
    vm.objectTypes = [];
    vm.selectedObjectType = "";
    vm.formData = {
      cmd: 'add_object',
      icon: "img/markers/objects/land-car-1.svg"
    };

    vm.save = save;
    ////////////////////////////////////
    getObjectTypes();

    function getObjectTypes() {
      // vm.objectTypes = trackerConfigService.getObjectTypes();
      vm.objectTypes = gsValues['device_list'];
      vm.formData.device = "Meitrack MVT100";
    }

    function save() {
      var form = angular.element(document.getElementsByClassName("addObjectForm"));

      if (form.hasClass("ng-invalid-minlength") || form.hasClass("ng-invalid-maxlength")) {
        toastr.warning("IMEI should be 15 or 16 digits.");
        return;
      }

      if (form.hasClass("ng-invalid")) {
        toastr.warning("Please fill all the fields.");
        return;
      }

      vm.working = true;
      utilService.getItem("user", function (user) {
        var user = JSON.parse(user);
        var request = {
          cmd: vm.formData.cmd,
          device: vm.formData.device,
          icon: vm.formData.icon,
          imei: "" + vm.formData.imei,
          name: vm.formData.name,
          simnumber: vm.formData.simnumber,
          user_id: user.id
        };

        console.log(global.baseUrl, vm.formData);
        $http.post(global.baseUrl + "/api/mobilapp/addObject.php", request).then(function (response) {
          vm.working = false;
          if (response.data == "EXISTS") {
            toastr.warning("This IMEI already exists.");
          } else if (response.data == "OK") {
            homeService.getUserObjects(function () {
              toastr.success("Device saved successfuly.");
              $ionicHistory.goBack();
            });
          } else {
            toastr.warning("Unexpected error occured\n" + response.data);
          }
        });
      })
    }

  }

}())

var gsValues = [];
gsValues['device_list'] = [];
gsValues['device_list'] = [
  {name: 'Meitrack MVT100'},
  {name: 'Meitrack MVT340'},
  {name: 'Meitrack MVT380'},
  {name: 'Meitrack MVT600'},
  {name: 'Meitrack MVT800'},
  {name: 'Meitrack MT90'},
  {name: 'Meitrack T322'},
  {name: 'Meitrack T622'},
  {name: 'Meitrack TC68'},
  {name: 'Meitrack TC68S'},
  {name: 'Queclink GL200'},
  {name: 'Queclink GL300'},
  {name: 'Teltonika FM1000'},
  {name: 'Teltonika FM1010'},
  {name: 'Teltonika FM1100'},
  {name: 'Teltonika FM1110'},
  {name: 'Teltonika FM1120'},
  {name: 'Teltonika FM1122'},
  {name: 'Teltonika FM1200'},
  {name: 'Teltonika FM1202'},
  {name: 'Teltonika FM1204'},
  {name: 'Teltonika FM3600'},
  {name: 'Teltonika FM3620'},
  {name: 'Teltonika FM5300'},
  {name: 'Teltonika GH3000'},
  {name: 'Teltonika GH4000'},
  {name: 'AGPS 010'},
  {name: 'AGPS 020'},
  {name: 'Amwell T20'},
  {name: 'Amwell T360-101A'},
  {name: 'Amwell T360-101E'},
  {name: 'Amwell T360-101P'},
  {name: 'Amwell T360-103'},
  {name: 'Amwell T360-108'},
  {name: 'Amwell T360-269'},
  {name: 'Amwell T360-269B'},
  {name: 'Amwell T360-269JT'},
  {name: 'APK-COM'},
  {name: 'Aplicom A1 MAX'},
  {name: 'Aplicom A1 MAX RDL'},
  {name: 'Aplicom A1 TRAX'},
  {name: 'Aplicom A9 NEX'},
  {name: 'Aplicom A9 Quick'},
  {name: 'Aplicom A9 Trix'},
  {name: 'Aplicom A9 IPEX'},
  {name: 'Aquila Track'},
  {name: 'ATrack AT1'},
  {name: 'ATrack AT1Pro'},
  {name: 'ATrack AT5i'},
  {name: 'ATrack AU5i'},
  {name: 'ATrack AX5'},
  {name: 'ATrack AY5i'},
  {name: 'AutoFon'},
  {name: 'Auto Leaders 800C'},
  {name: 'Auto Leaders 900C'},
  {name: 'Auto Leaders 900E'},
  {name: 'BCE FM Light'},
  {name: 'BCE FM Blue+'},
  {name: 'BITREK series'},
  {name: 'Bofan PT80'},
  {name: 'Bofan PT100'},
  {name: 'Bofan PT200'},
  {name: 'Bofan PT201'},
  {name: 'Bofan PT300X'},
  {name: 'Bofan PT500'},
  {name: 'Bofan PT502'},
  {name: 'Bofan PT600X'},
  {name: 'BS Technotronics BSTPL-14'},
  {name: 'BS Technotronics BSTPL-15'},
  {name: 'C2STEK'},
  {name: 'Calamp LMU-300'},
  {name: 'Calamp LMU-400'},
  {name: 'Calamp LMU-700'},
  {name: 'Calamp LMU-800'},
  {name: 'Calamp LMU-900'},
  {name: 'Calamp LMU-1100'},
  {name: 'Calamp LMU-1200'},
  {name: 'Calamp LMU-2000'},
  {name: 'Calamp LMU-2100'},
  {name: 'Calamp LMU-2600'},
  {name: 'Calamp LMU-2700'},
  {name: 'Calamp LMU-3030'},
  {name: 'Calamp LMU-4200'},
  {name: 'Calamp LMU-4520'},
  {name: 'Calamp LMU-5000'},
  {name: 'Careu Ueco'},
  {name: 'Carrideo micro GPS'},
  {name: 'Castel OBD'},
  {name: 'Castel SAT-802'},
  {name: 'Coban GPS105'},
  {name: 'Coban GPS106'},
  {name: 'Coban GPS107'},
  {name: 'Coban GPS301'},
  {name: 'Coban GPS302'},
  {name: 'Coban GPS304'},
  {name: 'Coban GPS305'},
  {name: 'Coban GPS306'},
  {name: 'Concox ET100'},
  {name: 'Concox GS503'},
  {name: 'Concox GT02'},
  {name: 'Concox GT03'},
  {name: 'Concox GT03A'},
  {name: 'Concox GT03B'},
  {name: 'Concox GT06'},
  {name: 'Concox GT06N'},
  {name: 'Concox TR06'},
  {name: 'Concox GT07'},
  {name: 'Concox GT100'},
  {name: 'Concox GT300'},
  {name: 'Concox GT710'},
  {name: 'Concox TR02'},
  {name: 'Concox WeTrack 2'},
  {name: 'China Radio CRT806'},
  {name: 'China Radio CRT809'},
  {name: 'China Radio CRT19N'},
  {name: 'Cybergraphy G200S'},
  {name: 'Cybergraphy G200X'},
  {name: 'Detero series'},
  {name: 'Digital Systems DSF10'},
  {name: 'Digital Systems DSF20'},
  {name: 'Digital Systems DSF21'},
  {name: 'Digital Systems DSF22'},
  {name: 'Disha'},
  {name: 'EELINK GOT08'},
  {name: 'EELINK GOT10'},
  {name: 'EELINK GPT06'},
  {name: 'EELINK K6'},
  {name: 'EELINK K9+'},
  {name: 'EELINK K20'},
  {name: 'EELINK TK115'},
  {name: 'EELINK TK116'},
  {name: 'EELINK TK119'},
  {name: 'Falcom STEPPIII'},
  {name: 'Fifotrack A100'},
  {name: 'Fifotrack A200'},
  {name: 'Fifotrack A300'},
  {name: 'Fifotrack Q1'},
  {name: 'Flextrack Lommy'},
  {name: 'GalileoSky Galileo'},
  {name: 'Gator M508'},
  {name: 'Gator M518'},
  {name: 'Gator M528'},
  {name: 'Gator M588N'},
  {name: 'Gator M588S'},
  {name: 'Geneko Fox Easy'},
  {name: 'Geneko Fox Lite'},
  {name: 'Geneko Fox Advanced'},
  {name: 'GlobalSat GTR128'},
  {name: 'GlobalSat GTR129'},
  {name: 'GlobalSat TR102'},
  {name: 'GlobalSat TR151'},
  {name: 'GlobalSat TR203'},
  {name: 'GlobalSat TR206'},
  {name: 'GlobalSat TR600'},
  {name: 'Gosafe G2P'},
  {name: 'Gosafe G1S'},
  {name: 'Gosafe G3A'},
  {name: 'Gosafe G3S'},
  {name: 'Gosafe G6S'},
  {name: 'Gosafe G626I'},
  {name: 'Gosafe G71'},
  {name: 'Gosafe G717'},
  {name: 'Gosafe G737'},
  {name: 'Gosafe G777'},
  {name: 'Gosafe G787'},
  {name: 'Gosafe G797'},
  {name: 'GoTop'},
  {name: 'Haicom HI-602X'},
  {name: 'Haicom HI-602X'},
  {name: 'Haicom HI-603X'},
  {name: 'Haicom HI-604X'},
  {name: 'Haicom HI-605X'},
  {name: 'Inteliot IT100'},
  {name: 'Inteliot IT200'},
  {name: 'IntelliTrac X1'},
  {name: 'Internex IGT100'},
  {name: 'iStartek VT206'},
  {name: 'iStartek VT600'},
  {name: 'i-Trac A1'},
  {name: 'i-Trac GTLT3'},
  {name: 'i-Trac MT-1'},
  {name: 'i-Trac MT-1C'},
  {name: 'i-Trac MT-1X'},
  {name: 'Jointech GP4000'},
  {name: 'Jointech GP5000'},
  {name: 'Jointech GP6000'},
  {name: 'Jointech GP6000F'},
  {name: 'Jointech JT600'},
  {name: 'jTrack CT101'},
  {name: 'Keson KS668'},
  {name: 'KHD KC200'},
  {name: 'KHD KG100'},
  {name: 'KHD KG200'},
  {name: 'KHD KG300'},
  {name: 'KH-M100A'},
  {name: 'Maestro MicroTracker'},
  {name: 'Mastrack MT-OBD'},
  {name: 'Maxepor MW-G01'},
  {name: 'Megastek GMT-368'},
  {name: 'Megastek GMT-368SQ'},
  {name: 'Megastek GPT-69'},
  {name: 'Megastek GT-89'},
  {name: 'Megastek GT-99'},
  {name: 'Megastek GVT-369'},
  {name: 'Megastek GVT-390'},
  {name: 'Megastek GVT-500'},
  {name: 'Megastek GVT-510'},
  {name: 'Megastek GVT-800'},
  {name: 'Megastek MT-100'},
  {name: 'Megastek MT-90'},
  {name: 'Megastek XT-007'},
  {name: 'Meiligao GT30i'},
  {name: 'Meiligao GT60'},
  {name: 'Meiligao VT300'},
  {name: 'Meiligao VT310'},
  {name: 'Meiligao VT400'},
  {name: 'Meitrack MT88'},
  {name: 'Meitrack MT80i'},
  {name: 'Meitrack T322'},
  {name: 'Meitrack T355'},
  {name: 'Meitrack T622'},
  {name: 'MiniFinder Atto'},
  {name: 'MiniFinder Pico'},
  {name: 'Minova miTrack-II Basic'},
  {name: 'Minova miTrack-II Plus'},
  {name: 'M-Plata M100'},
  {name: 'M-Plata T150'},
  {name: 'Navtelecom Smart'},
  {name: 'Oigo Telematics MG series'},
  {name: 'OKO АВТО-2'},
  {name: 'OKO NAVI-8C'},
  {name: 'Oner series'},
  {name: 'Orion Technology OBDtrac'},
  {name: 'Orion Technology Easytrac mini'},
  {name: 'Orion Technology Easytrac'},
  {name: 'Pointer Cellocator CR200'},
  {name: 'Pointer Cellocator Cello-F'},
  {name: 'Queclink GL200'},
  {name: 'Queclink GL300'},
  {name: 'Queclink GL300W'},
  {name: 'Queclink GL500'},
  {name: 'Queclink GL505'},
  {name: 'Queclink GMT100'},
  {name: 'Queclink GMT200'},
  {name: 'Queclink GS100'},
  {name: 'Queclink GT200'},
  {name: 'Queclink GT300'},
  {name: 'Queclink GT301'},
  {name: 'Queclink GT500'},
  {name: 'Queclink GV200/G'},
  {name: 'Queclink GV300'},
  {name: 'Queclink GV300W'},
  {name: 'Queclink GV500'},
  {name: 'Queclink GV55/LITE'},
  {name: 'Queclink GV65/LITE'},
  {name: 'Queclink GV75'},
  {name: 'Queclink GV75W'},
  {name: 'Queclink TRS'},
  {name: 'Raveon RV-M7 GX'},
  {name: 'Roadsay RS3000'},
  {name: 'Roadsay RS3000S'},
  {name: 'Ruptela FM-Eco3'},
  {name: 'Ruptela FM-Pro3'},
  {name: 'Ruptela FM-Pro3-R'},
  {name: 'Ruptela FM-Tco3'},
  {name: 'Ruptela FM-Eco4'},
  {name: 'Ruptela FM-Pro4'},
  {name: 'Ruptela FM-Tco4'},
  {name: 'Ruptela Trailer Tracker'},
  {name: 'Sanav CT24'},
  {name: 'Sanav CT58'},
  {name: 'Sanav GC-101'},
  {name: 'Sanav MU-201'},
  {name: 'Satellite Solutions SAT-LITE'},
  {name: 'Satellite Solutions SAT-LITE 2'},
  {name: 'Satellite Solutions SAT-PRO'},
  {name: 'Satellite Solutions SUPER-LITE'},
  {name: 'Silicon Techlabs STL060'},
  {name: 'Skypatrol TT8750'},
  {name: 'SkyTrack JB101'},
  {name: 'Suntech ST'},
  {name: 'TelcomIP Patrol Scan'},
  {name: 'Teltonika AT1000'},
  {name: 'Teltonika AT1200'},
  {name: 'Teltonika FM1125'},
  {name: 'Teltonika FM2200'},
  {name: 'Teltonika FM3200'},
  {name: 'Teltonika FM3300'},
  {name: 'Teltonika FM3400'},
  {name: 'Teltonika FM3600'},
  {name: 'Teltonika FM3620'},
  {name: 'Teltonika FM4100'},
  {name: 'Teltonika FM4200'},
  {name: 'Teltonika FM5500'},
  {name: 'Teltonika GH1202'},
  {name: 'TKSTAR XE103'},
  {name: 'TKSTAR XE108'},
  {name: 'TKSTAR XE120'},
  {name: 'TKSTAR XE201'},
  {name: 'TKSTAR XE209'},
  {name: 'TLT-2H'},
  {name: 'Topflytech T8801'},
  {name: 'Topflytech T8802'},
  {name: 'Topflytech T8803'},
  {name: 'Topflytech T8803 Pro'},
  {name: 'Topflytech T8806'},
  {name: 'Totem Tech AT03'},
  {name: 'Totem Tech AT05'},
  {name: 'Totem Tech AT06'},
  {name: 'Totem Tech AT07'},
  {name: 'Totem Tech AT09'},
  {name: 'TopTen'},
  {name: 'Tracer X2'},
  {name: 'TrackPro TR20'},
  {name: 'TrackPro TR60'},
  {name: 'TWIG'},
  {name: 'Tracker Technology AVL115'},
  {name: 'Tracker Technology AVL520'},
  {name: 'Tracker Technology GAB2'},
  {name: 'Tracker Technology K7'},
  {name: 'Tracker Technology MPS320'},
  {name: 'Tracker Technology MPS340'},
  {name: 'Tracker Technology MPS350'},
  {name: 'Tytan SAT DS520'},
  {name: 'Tytan SAT DS530'},
  {name: 'TZone Digital AVL02'},
  {name: 'TZone Digital AVL03'},
  {name: 'TZone Digital AVL05'},
  {name: 'TZone Digital AVL08'},
  {name: 'Ulbotech T3XX series'},
  {name: 'Uniguard series'},
  {name: 'Unknown 056'},
  {name: 'Unknown 807RF'},
  {name: 'Unknown CCTR-800'},
  {name: 'Unknown CCTR-801'},
  {name: 'Unknown CCTR-803'},
  {name: 'Unknown CCTR-808S'},
  {name: 'Unknown CCTR-810'},
  {name: 'Unknown G64'},
  {name: 'Unknown GM908'},
  {name: 'Unknown GP106M'},
  {name: 'Unknown GT02'},
  {name: 'Unknown GT03'},
  {name: 'Unknown HW18'},
  {name: 'Unknown M60'},
  {name: 'Unknown PG88'},
  {name: 'Unknown PolGPS1'},
  {name: 'Unknown PT3000'},
  {name: 'Unknown STL060'},
  {name: 'Unknown T18'},
  {name: 'Unknown T0024'},
  {name: 'Unknown TK102'},
  {name: 'Unknown TK103'},
  {name: 'Unknown TK106'},
  {name: 'Unknown TK110'},
  {name: 'Unknown TK206OBD'},
  {name: 'Unknown TL206'},
  {name: 'Unknown VT206'},
  {name: 'Unknown WB-1G'},
  {name: 'Visiontek 84VTU'},
  {name: 'Visiontek 86VTU'},
  {name: 'Visiontek 87VTU'},
  {name: 'Virus Platinum'},
  {name: 'Wialon IPS'},
  {name: 'XEXUN TK102/TK102-2'},
  {name: 'XEXUN TK103/TK103-2'},
  {name: 'XEXUN TK107'},
  {name: 'XEXUN TK201'},
  {name: 'XEXUN TK202'},
  {name: 'XEXUN TK203'},
  {name: 'XEXUN XT008'},
  {name: 'XEXUN XT009'},
  {name: 'XEXUN XT013'},
  {name: 'Yuwei YW3000'},
  {name: 'Mobile (Android)'},
  {name: 'Mobile (BlackBerry)'},
  {name: 'Mobile (iOS)'},
  {name: 'Mobile (Windows Phone)'},
  {name: 'Other'}
];
